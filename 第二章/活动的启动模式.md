# æ´»åŠ¨å¯åŠ¨æ¨¡å¼

å¯åŠ¨æ¨¡å¼ä¸»è¦åˆ†ä¸º 4 ç§, åˆ†åˆ«æ˜¯ æ ‡å‡†å¯åŠ¨æ¨¡å¼ï¼ˆstandardï¼‰ã€singleTopã€singleTaskã€singleInstance, å¯ä»¥åœ¨ AndroidManifast.xml ä¸­é€šè¿‡ ``android:launchMode`` è¿›è¡ŒæŒ‡å®š Activity çš„å¯åŠ¨æ–¹å¼.

## standard ï¼ˆé»˜è®¤çš„å¯åŠ¨æ–¹å¼ï¼‰

*   é»˜è®¤æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æ²¡æ˜¾ç¤ºæŒ‡å®šå¯åŠ¨æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œæ´»åŠ¨éƒ½æ˜¯å·²æ ‡å‡†çš„æ–¹å¼å¯åŠ¨
*   Androidæ˜¯é€šè¿‡``è¿”å›æ ˆ``æ¥ç®¡ç†æ´»åŠ¨çš„ï¼Œåœ¨standardæ¨¡å¼ä¸‹ï¼Œæ¯å½“å¯åŠ¨ä¸€ä¸ªæ–°çš„æ´»åŠ¨å°±ä¼šåŠ å…¥åˆ°``è¿”å›æ ˆ``çš„é¡¶éƒ¨ï¼Œå¯¹äºä½¿ç”¨ standardæ¨¡å¼çš„æ´»åŠ¨ï¼Œç³»ç»Ÿå¹¶ä¸ä¼šåœ¨ä¹å¯è¿™ä¸ªæ´»åŠ¨æ˜¯å¦åœ¨è¿”å›æ ˆä¸­ï¼Œæ¯æ¬¡å¯åŠ¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹.

ä¸‹é¢å¯ä»¥é€šè¿‡å®ä¾‹æ¥çœ‹çœ‹

* 1 åœ¨ FristActivity ä¸­ä¿®æ”¹ä»£ç å¦‚ä¸‹

``` java

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.frist_layout);
        // æ‰“å°å¯¹è±¡å­—ç¬¦ä¸²å½¢å¼
        Log.d("FristActivity", this.toString());

        Button button1 = (Button)  findViewById(R.id.button_1);
        button1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                final Intent intent = new Intent(FristActivity.this, FristActivity.class);
                startActivity(intent);
            }
        });
```

* 2 è¿ç»­ç‚¹å‡»ç•Œé¢ä¸Šçš„ ``Button1`` æŒ‰é’®
* 3 æ§åˆ¶å°è¾“å…¥å†…å®¹å¦‚ä¸‹

![avatar](img/standard_log.png)

å¯ä»¥çœ‹åˆ°ç‚¹å‡»å¤šå°‘æ¬¡,æ‰“å°å‡ºå¾—å¯¹è±¡éƒ½ä¸ä¸€æ ·. ä¹Ÿå°±è¯´æ˜æ¯å¯åŠ¨ä¸€æ¬¡ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹.

standardæ¨¡å¼çš„ç¤ºæ„å›¾:

![avatar](img/standard_mode.png)

## singleTop

*   å½“å¯åŠ¨çš„æ´»åŠ¨å·²å¤„äºæ ˆé¡¶, é‚£ä¹ˆç³»ç»Ÿä¸ä¼šå†æ–°åˆ›å»ºå®ä¾‹,è€Œæ˜¯ä¼šç›´æ¥å¤ç”¨.

*   å¦‚æœä¸åœ¨æ ˆé¡¶ï¼Œå³ä½¿å¯åŠ¨çš„æ´»åŠ¨å·²å­˜åœ¨æ ˆä¸­ä¾ç„¶è¿˜æ˜¯ä¼šåˆ›å»ºæ–°çš„å®ä¾‹

ğŸ‘‡é€šè¿‡å®ä¾‹æ¥çœ‹çœ‹

* 1 åœ¨ AndrodMainfest.xml ä¸­ä¿®æ”¹ FristActivity çš„å¯åŠ¨æ¨¡å¼

``` xml

    <activity
        android:name=".FristActivity"
        android:launchMode="singleTop"
        android:label="@string/app_name">
        <intent-filter>
            <!-- è¡Œä¸º -->
            <action android:name="android.intent.action.MAIN" />
            <!-- ç±»ç›® -->
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

```

* 2 è¿ç»­ç‚¹å‡»ç•Œé¢ä¸Šçš„ ``Button1`` æŒ‰é’®
* 3 æ§åˆ¶å°è¾“å…¥å†…å®¹å¦‚ä¸‹

![avatar](img/singleTop_mode_log01.png)

ä»æ‰“å°è¾“å…¥çš„ç»“æœæ¥çœ‹ï¼Œå¹¶æ²¡æœ‰é‡å¤æ‰“å°.

ğŸ‘‡å†ä¿®æ”¹ä¸‹å®ä¾‹æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå½“å­˜åœ¨æ ˆä¸­ä½†ä¸å¤„äºæ ˆé¡¶æ—¶ï¼Œè¿˜ä¼šä¸ä¼šå†åˆ›å»ºä¸€ä¸ªå®ä¾‹.

* 1 åŒæ—¶ä¿®æ”¹ä¸‹ ``FristActivity``, ``SecondActivity`` ä¸­çš„ onCreated æ–¹æ³•, å¦‚ä¸‹

``` java
    // FristActivity
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // æŒ‡å®šå¸ƒå±€æ–‡ä»¶
        // é¡¹ç›®ä¸­æ·»åŠ çš„ä»»ä½•èµ„æºæ–‡ä»¶éƒ½ä¼šåœ¨ R æ–‡ä»¶ä¸­.
        setContentView(R.layout.frist_layout);
        Log.d("FristActivity", this.toString());
        Button button1 = (Button)  findViewById(R.id.button_1);
        button1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                /**
                    * 1 å¯åŠ¨æ´»åŠ¨æ–¹å¼ startActivityForResult(Intent, Bound)  ç¬¬ä¸€ä¸ªå¯åŠ¨å“ªä¸ªIntentï¼Œ ç¬¬äºŒä¸ªæ˜¯è¯·æ±‚ç ä¸»è¦ç”¨ä¸è¿”å›ç»“æœçš„å›è°ƒä¸­åˆ¤æ–­è¿”å›çš„æ¥æº
                    * 2 é‡å†™ onActivityResult æ¥æ”¶è¿”å›å€¼
                    */

                final Intent intent = new Intent(FristActivity.this, SecondActivity.class);
                startActivity(intent);
            }
        });
    }

```

``` java
    // SecondActivity

    Button button1 = (Button)  findViewById(R.id.button_1);
    button1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            /**
                * 1 å¯åŠ¨æ´»åŠ¨æ–¹å¼ startActivityForResult(Intent, Bound)  ç¬¬ä¸€ä¸ªå¯åŠ¨å“ªä¸ªIntentï¼Œ ç¬¬äºŒä¸ªæ˜¯è¯·æ±‚ç ä¸»è¦ç”¨ä¸è¿”å›ç»“æœçš„å›è°ƒä¸­åˆ¤æ–­è¿”å›çš„æ¥æº
                * 2 é‡å†™ onActivityResult æ¥æ”¶è¿”å›å€¼
                */

            final Intent intent = new Intent(FristActivity.this, FristActivity.class);
            startActivity(intent);
        }
    });

```

* é‡å¯åº”ç”¨ï¼Œå…ˆç‚¹å‡» ``Button 1`` å†ç‚¹å‡» ``Button 2``
* æ§åˆ¶å°è¾“å‡ºç»“æœ

![avatar](img/singleTop_mode_log02.png)





## singleTask


## singleINstance